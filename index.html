<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Soim - ذا سويم</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;800&display=swap" rel="stylesheet">
    <style>
        /* --- المتغيرات العامة --- */
        :root {
            --main-bg: #050505;
            --accent-red: #ff0f0f;
            --accent-dark-red: #8a0000;
            --text-color: #e0e0e0;
            --card-bg: #111111;
        }

        /* --- إعدادات الصفحة --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--main-bg);
            background-image: url('sss.png');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            color: var(--text-color);
            overflow-x: hidden;
            padding-bottom: 80px;
            animation: fadeInPage 1s ease-out;
        }

        @keyframes fadeInPage {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* --- شريط التنقل --- */
        .navbar {
            position: sticky;
            top: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 12px 0;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.8);
        }

        .nav-btn {
            width: 95px; 
            padding: 6px 0;
            font-size: 0.8rem;
            background: rgba(20, 0, 0, 0.7);
            color: #bbb;
            border: 1px solid #4a0000;
            border-radius: 4px;
            cursor: pointer;
            text-align: center;
            font-family: 'Tajawal', sans-serif;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1);
        }

        .nav-btn:hover {
            background: rgba(60, 0, 0, 0.8);
            border-color: var(--accent-red);
            color: #fff;
            box-shadow: 0 0 10px rgba(255, 15, 15, 0.3);
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: var(--accent-dark-red);
            border-color: var(--accent-red);
            color: #fff;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(255, 15, 15, 0.5);
        }

        .nav-btn:active {
            transform: scale(0.95);
        }

        /* --- الهيدر والشعار --- */
        header {
            text-align: center;
            padding-top: 30px;
            margin-bottom: 30px;
        }

        .site-logo {
            width: 180px;
            max-width: 80%;
            height: auto;
            display: block;
            margin: 0 auto;
            filter: drop-shadow(0 0 15px rgba(255, 15, 15, 0.4));
            transition: transform 0.3s;
        }
        
        .site-logo:hover {
            transform: scale(1.05);
        }

        /* --- الحاويات --- */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            display: none;
            animation: slideUpFade 0.6s cubic-bezier(0.25, 1, 0.5, 1);
        }

        .container.active-section {
            display: block;
        }

        @keyframes slideUpFade {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- الأقسام الداخلية --- */
        .profile-card {
            background: rgba(10, 10, 10, 0.9);
            border: 1px solid #333;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            line-height: 1.8;
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
        }
        
        .profile-title {
            color: var(--accent-red);
            font-size: 1.8rem;
            margin-bottom: 20px;
            font-weight: 800;
        }

        .profile-text {
            color: #ddd;
            font-size: 1rem;
            margin-bottom: 25px;
        }

        /* --- شبكة الألعاب --- */
        .games-grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 35px;
        }

        .game-card {
            width: 260px;
            background: #000;
            position: relative;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            cursor: pointer;
            z-index: 1;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: conic-gradient(transparent 75%, var(--accent-red)); 
            animation: rotateBorder 3s linear infinite;
            z-index: -2;
        }
        
        .game-card::after {
            content: '';
            position: absolute;
            inset: 3px;
            background: var(--card-bg);
            border-radius: 10px;
            z-index: -1;
        }

        @keyframes rotateBorder {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .game-card:active {
            transform: scale(0.97);
        }

        .slider-container {
            width: 100%;
            height: 160px;
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            margin-bottom: 12px;
            background-color: #000;
        }

        .slider-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: none;
            border-radius: 8px;
        }

        .slider-img.active {
            display: block;
        }

        .slider-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 5px;
            pointer-events: none;
        }
        
        .arrow {
            color: white;
            background: rgba(0,0,0,0.6);
            border-radius: 50%;
            width: 28px;
            height: 28px;
            text-align: center;
            line-height: 28px;
            font-size: 16px;
            cursor: pointer;
            pointer-events: auto;
            transition: background 0.2s;
        }

        .arrow:hover {
            background: var(--accent-red);
        }

        .game-title {
            font-size: 1.1rem;
            font-weight: bold;
            margin: 8px 0;
            text-align: center;
            color: #fff;
            z-index: 2;
        }

        .download-btn {
            background: var(--accent-dark-red);
            color: white;
            border: none;
            padding: 8px 25px;
            border-radius: 6px;
            font-size: 0.85rem;
            text-decoration: none;
            margin-top: 5px;
            display: inline-block;
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.2);
            z-index: 2;
            transition: 0.2s;
        }
        
        .download-btn:hover {
            background: var(--accent-red);
        }

        .game-info-small {
            font-size: 0.75rem;
            color: #999;
            margin-top: 8px;
            text-align: center;
        }

        /* --- Pagination --- */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 50px;
        }

        .page-btn {
            background: #222;
            color: white;
            border: 1px solid #444;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 6px;
        }

        /* --- Social Grid --- */
        .social-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 25px;
        }
        
        .social-item {
            background: #151515;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #333;
            transition: 0.3s;
            text-decoration: none;
            color: white;
            display: block;
        }
        .social-item:hover {
            border-color: var(--accent-red);
            transform: translateY(-5px);
        }
        .social-icon { width: 60px; height: 60px; margin-bottom: 15px; }

        /* --- تفاصيل اللعبة --- */
        .game-detail-view {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 2000;
            overflow-y: auto;
            padding: 20px;
            animation: zoomIn 0.3s ease;
        }

        @keyframes zoomIn {
            from { transform: scale(0.95); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .detail-content {
            max-width: 700px;
            margin: 50px auto;
            background: #111;
            border-radius: 20px;
            padding: 30px;
            position: relative;
            text-align: center;
            border: 1px solid #333;
            box-shadow: 0 0 40px rgba(138, 0, 0, 0.3);
        }

        .detail-content::before {
            content: '';
            position: absolute;
            inset: -2px;
            z-index: -1;
            border-radius: 22px;
            background: conic-gradient(transparent 70%, var(--accent-red));
            animation: rotateBorder 4s linear infinite;
        }
        .detail-content::after {
            content: '';
            position: absolute;
            inset: 0;
            background: #111;
            border-radius: 20px;
            z-index: -1;
        }

        .close-detail {
            position: absolute;
            top: 20px; left: 20px;
            background: #222; color: #fff;
            border: 1px solid #555;
            width: 35px; height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .detail-title {
            color: var(--accent-red);
            font-size: 2.2rem;
            margin-bottom: 25px;
            border-bottom: 1px solid #333;
            padding-bottom: 15px;
            display: inline-block;
        }

        .detail-img-box {
            width: 100%;
            height: 300px;
            overflow: hidden;
            border-radius: 12px;
            margin-bottom: 25px;
            border: 1px solid #333;
            background: #000;
        }
        
        .detail-img-box img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .detail-box {
            border: 1px solid #333;
            background: rgba(255, 255, 255, 0.03);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: right;
        }

        .detail-box h3 {
            color: var(--accent-red);
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .big-btn {
            width: 100%;
            max-width: 350px;
            padding: 15px;
            background: var(--accent-dark-red);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            display: block;
            border: 1px solid var(--accent-red);
            transition: 0.3s;
            margin: 10px auto;
        }

        .big-btn:hover {
            background: var(--accent-red);
            box-shadow: 0 0 20px var(--accent-red);
        }
        
        .instruction-box {
            background: #1a1a1a;
            padding: 20px;
            text-align: right;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
            font-size: 0.95rem;
            color: #ccc;
            border-right: 4px solid var(--accent-red);
        }

        /* ------------------------------------------- */
        /* --- تصميم عداد الزوار (الثعبان الزجاجي) --- */
        /* ------------------------------------------- */
        #live-counter-badge {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            padding: 10px 25px; 
            overflow: hidden; 
            border-radius: 50px;
            font-family: 'Tajawal', sans-serif;
            color: #fff;
            z-index: 10000;
            direction: rtl;
            user-select: none;
        }

        #live-counter-badge::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 400%; 
            top: -150%; 
            left: -50%;
            background: conic-gradient(
                transparent 80%, 
                var(--accent-red) 100%
            );
            animation: snake-rotate 4s linear infinite;
        }

        @keyframes snake-rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        #live-counter-badge::after {
            content: '';
            position: absolute;
            inset: 2px; 
            background: rgba(5, 5, 5, 0.9); 
            backdrop-filter: blur(15px); 
            -webkit-backdrop-filter: blur(15px);
            border-radius: 50px;
            z-index: 0; 
        }

        .badge-content {
            position: relative;
            z-index: 2; 
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .counter-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: bold;
        }

        .dot-online {
            width: 10px;
            height: 10px;
            background-color: #00e676;
            border-radius: 50%;
            box-shadow: 0 0 10px #00e676;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 230, 118, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 230, 118, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 230, 118, 0); }
        }
        
        .icon-eye { width: 18px; height: 18px; fill: #ffffff; opacity: 0.9; }
    </style>
</head>
<body>

    <nav class="navbar">
        <button class="nav-btn" onclick="showSection('home')">الرئيسية</button>
        <button class="nav-btn active" onclick="showSection('games')">التعريبات</button>
        <button class="nav-btn" onclick="showSection('accounts')">حساباتي</button>
        <button class="nav-btn" onclick="window.location.href='https://t.me/ftaxx'">تواصل معي</button>
    </nav>

    <header>
        <img src="thesoim.png" alt="The Soim Logo" class="site-logo">
    </header>

    <section id="home" class="container">
        <div class="profile-card">
            <h2 class="profile-title">ذا سويم | The Soim</h2>
            <div class="profile-text">
                <p>مطور ومعدّل محترف في عالم ألعاب وتطبيقات الأندرويد.</p>
                <p>أعمل على تعريب الألعاب والتطبيقات بجودة عالية مع الحفاظ على روح المحتوى الأصلية، وأهتم بتقديم تجربة استخدام سلسة وواضحة للمستخدم العربي.</p>
                <br>
                <p>متخصص في تعديل الألعاب، تحسين الأداء، إصلاح الأخطاء، وإضافة مميزات جديدة تجعل اللعبة أو التطبيق أكثر ثباتًا، سرعة، ومتعة في الاستخدام.</p>
                <br>
                <p>أقدّم أيضًا تحسينات بصرية وصوتية، وضبط الإعدادات الداخلية للألعاب لتناسب الأجهزة الضعيفة والمتوسطة بدون التضحية بجودة التجربة.</p>
                <br>
                <p>أسعى دائماً لتقديم نسخ محسنة، نظيفة، ومتكاملة تناسب الجميع، مع التركيز على الاحترافية، الدقة، وخبرة طويلة في هذا المجال.</p>
            </div>
            <a href="https://t.me/ftaxx" class="big-btn">تواصل معي</a>
        </div>
    </section>

    <section id="accounts" class="container">
        <div class="social-grid">
            <a href="https://www.instagram.com/ftxxax?igsh=MTQzZmNjM3IyMGE4cg==" class="social-item">
                <img src="insta.png" alt="Instagram" class="social-icon">
                <h3>Instagram</h3>
            </a>
            <a href="https://youtube.com/@ftaxx?si=OUMRgkPTAl30DpCe" class="social-item">
                <img src="youtube.png" alt="YouTube" class="social-icon">
                <h3>YouTube</h3>
            </a>
            <a href="https://t.me/soi7m" class="social-item">
                <img src="telegram.png" alt="Telegram" class="social-icon">
                <h3>Telegram</h3>
            </a>
            <a href="https://www.tiktok.com/@thsoim?_r=1&_t=ZS-924zNX7dBEi" class="social-item">
                <img src="tiktok.png" alt="TikTok" class="social-icon">
                <h3>TikTok</h3>
            </a>
        </div>
    </section>

    <section id="games" class="container active-section">
        <div class="games-grid" id="gamesGrid">
            </div>

        <div class="pagination">
            <button class="page-btn" onclick="changePage(-1)">السابق</button>
            <span class="page-info" id="pageInfo">1 / 2</span>
            <button class="page-btn" onclick="changePage(1)">التالي</button>
        </div>
    </section>

    <div id="gameDetailView" class="game-detail-view">
        <div class="detail-content">
            <button class="close-detail" onclick="closeGameDetail()">X</button>
            <h2 id="detailTitle" class="detail-title">عنوان اللعبة</h2>
            
            <div class="detail-img-box">
                <img id="detailImage" src="" alt="Game Image">
            </div>

            <div class="detail-box">
                <h3>قصة اللعبة:</h3>
                <p id="detailStory">نص القصة...</p>
            </div>

            <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                <div class="detail-box" style="flex:1">
                    <h3>وقت التختيم:</h3>
                    <p id="detailTime">00 ساعة</p>
                </div>
                <div class="detail-box" style="flex:1">
                    <h3>النهايات:</h3>
                    <p id="detailEndings">عدد النهايات</p>
                </div>
            </div>

            <div class="detail-buttons" id="detailButtons">
                </div>

            <div id="instructionsArea" class="instruction-box"></div>
        </div>
    </div>

    <div id="live-counter-badge">
        <div class="badge-content">
            <div class="counter-item" title="المتواجدون الآن">
                <div class="dot-online"></div>
                <span id="online-count">1</span>
            </div>
            
            <div style="width: 1px; height: 15px; background: rgba(255,255,255,0.2);"></div>

            <div class="counter-item" title="مجموع الزيارات">
                <svg class="icon-eye" viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                <span id="total-views">...</span>
            </div>
        </div>
    </div>

    <script>
        // --- بيانات الألعاب ---
        const gamesData = [
            {                           
                title: "OMORI",
                images: ["omori1.png", "omori2.png", "omori3.png"],
                downloadLink: "https://github.com/Thesoim/me-games-/releases/download/1.2/OMORI.apk",
                version: "v1.0.8.1",
                size: "993MB",
                platform: "Android",
                story: "لعبة رعب نفسي سريالية. استكشف عالمًا غريبًا مليئًا بالأصدقاء والأعداء الملونين. تنقل بين الواقع والخيال لكشف حقيقة منسية ومؤلمة.",
                timeToBeat: "20 ساعة",
                endings: "4 نهايات"
            },
            {
                title: "Loop Hero",
                images: ["loop1.png", "loop2.png", "loop3.png", "loop4.png"],
                downloadLink: "https://pixeldrain.com/u/eeXoB7N4",
                version: "v1.0.5",
                size: "208MB",
                platform: "Android",
                story: "يقع العالم في حلقة زمنية لا نهائية أغرقته في فوضى شاملة. استخدم مجموعة من البطاقات الغامضة لوضع الأعداء والمباني والتضاريس للبطل الشجاع في رحلته لكسر الدائرة.",
                timeToBeat: "20 - 30 ساعة",
                endings: "3 نهايات"
            },
            {
                title: "Door Kickers",
                images: ["door1.png", "door2.png", "door3.png"],
                downloadLink: "https://pixeldrain.com/u/XWpk8zzw",
                version: "v1.1.35",
                size: "467MB",
                platform: "Android",
                story: "لعبة استراتيجية تكتيكية تتحكم فيها بفريق SWAT. قم بتحليل الموقف، خطط لمسارات الاقتحام، واختر المعدات المناسبة لإنقاذ الرهائن والقضاء على الأشرار.",
                timeToBeat: "غير محدد",
                endings: "نظام مراحل"
            },
            {
                title: "Twilight Railway",
                images: ["twilight1.png", "twilight2.png", "twilight3.png"],
                downloadLink: "https://pixeldrain.com/u/KDnCt4eD",
                version: "v1.0.0",
                size: "187MB",
                platform: "Android",
                story: "رواية بصرية مؤثرة تدور أحداثها في قطار يسافر عبر عالم غامض عند الغسق. استكشف قصص الركاب ووجهاتهم في رحلة هادئة ومليئة بالمشاعر.",
                timeToBeat: "2 - 4 ساعات",
                endings: "نهاية واحدة"
            },
            {
                title: "The Wolf Among Us",
                images: ["wolf1.png", "wolf2.png", "wolf3.png"],
                downloadLink: "https://pixeldrain.com/u/5Goz2NnR",
                extraLink: "https://pixeldrain.com/u/homJHrvn",
                extraText: "ملف التعريب",
                hasInstructions: true,
                version: "v1.23",
                size: "2.34GB",
                platform: "Android",
                story: "مبنية على قصص Fables. العب دور Bigby Wolf وحقق في جريمة قتل وحشية في عالم مظلم ومليء بالغموض.",
                timeToBeat: "8 - 10 ساعات",
                endings: "حسب الخيارات"
            },
            {
                title: "Seven Mysteries",
                images: ["sevenmysteries1.png", "sevenmysteries2.png", "sevenmysteries3.png"],
                downloadLink: "https://pixeldrain.com/u/vSY6Miye",
                version: "v1.7",
                size: "94MB",
                platform: "Android",
                story: "لعبة رعب أنمي خارقة للطبيعة. في بلدة صغيرة، تخفي المدرسة أسراراً مرعبة. استكشف الفصول والممرات المظلمة لكشف الحقيقة.",
                timeToBeat: "3 - 5 ساعات",
                endings: "متعددة"
            },
            {
                title: "Undertale Red",
                images: ["UndertaleRed1.png", "UndertaleRed2.png", "UndertaleRed3.png"],
                downloadLink: "https://pixeldrain.com/u/1baa2Ci6",
                version: "v1.0.0",
                size: "27MB",
                platform: "Android",
                story: "معركة معجبين مشهورة تركز على قتال شخصية جديدة في عالم Undertale. تقدم تجربة قتالية فريدة.",
                timeToBeat: "30 دقيقة - 1 ساعة",
                endings: "قتل/رحمة"
            },
            {
                title: "Our Monsoon Balcony",
                images: ["OurMonsoonBalcony1.png", "OurMonsoonBalcony2.png", "OurMonsoonBalcony3.png", "OurMonsoonBalcony4.png"],
                downloadLink: "https://pixeldrain.com/u/GCUTArQL",
                version: "v2.2.2",
                size: "14MB",
                platform: "Android",
                story: "لعبة فيزيائية وتأملية بسيطة. استرخ في شرفتك أثناء المطر، وتفاعل مع العناصر البيئية.",
                timeToBeat: "لا نهائية",
                endings: "لا يوجد"
            },
            {
                title: "The Henry Stickmin Collection",
                images: ["TheHenryStickminCollection1.png", "TheHenryStickminCollection2.png"],
                downloadLink: "https://pixeldrain.com/u/qxzpD7fB",
                version: "v0.2",
                size: "411MB",
                platform: "Android",
                story: "مجموعة ألعاب كوميدية حيث تتحكم بـ Henry وتقرر مصيره عبر خيارات سخيفة.",
                timeToBeat: "4 - 6 ساعات",
                endings: "كثيرة جداً"
            },
            {
                title: "Stickman Completing the Mission",
                images: ["StickmanCompletingtheMission1.png", "StickmanCompletingtheMission2.png", "StickmanCompletingtheMission3.png"],
                downloadLink: "https://pixeldrain.com/u/5DEpMhTV",
                version: "v1.0",
                size: "269MB",
                platform: "Android",
                story: "الفصل الأخير من ملحمة Henry Stickmin. تحالفات متعددة ومسارات قصصية متشابكة.",
                timeToBeat: "2 - 3 ساعات",
                endings: "16 نهاية"
            }
        ];

        const itemsPerPage = 5;
        let currentPage = 1;
        const totalPages = Math.ceil(gamesData.length / itemsPerPage);

        function showSection(sectionId) {
            document.querySelectorAll('.container').forEach(el => {
                el.classList.remove('active-section');
                el.style.display = 'none';
            });
            const activeEl = document.getElementById(sectionId);
            activeEl.style.display = 'block';
            setTimeout(() => activeEl.classList.add('active-section'), 10);

            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            if(sectionId === 'home') document.querySelectorAll('.nav-btn')[0].classList.add('active');
            if(sectionId === 'games') document.querySelectorAll('.nav-btn')[1].classList.add('active');
            if(sectionId === 'accounts') document.querySelectorAll('.nav-btn')[2].classList.add('active');
        }

        function renderGames(page) {
            const grid = document.getElementById('gamesGrid');
            grid.innerHTML = '';
            
            const start = (page - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const gamesToShow = gamesData.slice(start, end);

            gamesToShow.forEach(game => {
                const card = document.createElement('div');
                card.className = 'game-card';
                card.onclick = (e) => {
                    if(!e.target.classList.contains('arrow') && !e.target.classList.contains('download-btn')) {
                        openGameDetails(game);
                    }
                };

                let imagesHtml = '';
                game.images.forEach((img, index) => {
                    imagesHtml += `<img src="${img}" class="slider-img ${index === 0 ? 'active' : ''}" data-idx="${index}">`;
                });

                card.innerHTML = `
                    <div class="slider-container">
                        ${imagesHtml}
                        <div class="slider-nav">
                            <div class="arrow" onclick="moveSlide(this, -1)">&#10094;</div>
                            <div class="arrow" onclick="moveSlide(this, 1)">&#10095;</div>
                        </div>
                    </div>
                    <div class="game-title">${game.title}</div>
                    <a href="${game.downloadLink}" class="download-btn" target="_blank">تحميل</a>
                    <div class="game-info-small">${game.version} | ${game.size}</div>
                    <div class="game-info-small">${game.platform}</div>
                `;
                grid.appendChild(card);
            });

            document.getElementById('pageInfo').innerText = `${currentPage} / ${totalPages}`;
        }

        function moveSlide(btn, direction) {
            const container = btn.parentElement.parentElement;
            const images = container.querySelectorAll('.slider-img');
            let activeIndex = 0;
            images.forEach((img, index) => {
                if (img.classList.contains('active')) {
                    activeIndex = index;
                    img.classList.remove('active');
                }
            });
            let newIndex = activeIndex + direction;
            if (newIndex < 0) newIndex = images.length - 1;
            if (newIndex >= images.length) newIndex = 0;
            images[newIndex].classList.add('active');
        }

        function changePage(direction) {
            const newPage = currentPage + direction;
            if (newPage >= 1 && newPage <= totalPages) {
                currentPage = newPage;
                renderGames(currentPage);
                window.scrollTo(0, 0);
            }
        }

        function openGameDetails(game) {
            document.getElementById('detailTitle').innerText = game.title;
            document.getElementById('detailImage').src = game.images[0];
            document.getElementById('detailStory').innerText = game.story;
            document.getElementById('detailTime').innerText = game.timeToBeat;
            document.getElementById('detailEndings').innerText = game.endings;

            const btnContainer = document.getElementById('detailButtons');
            btnContainer.innerHTML = `<a href="${game.downloadLink}" class="big-btn" target="_blank">تحميل اللعبة</a>`;

            const instructBox = document.getElementById('instructionsArea');
            instructBox.style.display = 'none';

            if (game.extraLink) {
                const extraBtn = document.createElement('a');
                extraBtn.href = game.extraLink;
                extraBtn.className = 'big-btn';
                extraBtn.innerText = game.extraText;
                extraBtn.target = "_blank";
                btnContainer.appendChild(extraBtn);
            }

            if (game.hasInstructions) {
                const instructBtn = document.createElement('button');
                instructBtn.className = 'big-btn';
                instructBtn.innerText = "طريقة إضافة التعريب";
                instructBtn.style.background = "#2a2a2a";
                instructBtn.onclick = () => {
                    instructBox.style.display = 'block';
                };
                btnContainer.appendChild(instructBtn);

                instructBox.innerHTML = `
                    <h4 style="color:var(--accent-red); margin-bottom:10px;">طريقة إضافة التعريب :</h4>
                    <p>1. استخدم تطبيق ZArchiver.</p>
                    <p>2. استخرج ملف التعريب وسيظهر لك مجلد باسم Telltale.</p>
                    <p>3. انقل مجلد Telltale إلى ذاكرة الهاتف الداخلية بجانب مجلدات: Download و Android.</p>
                `;
            }
            document.getElementById('gameDetailView').style.display = 'block';
        }

        function closeGameDetail() {
            document.getElementById('gameDetailView').style.display = 'none';
        }

        renderGames(currentPage);
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getDatabase, ref, onValue, set, onDisconnect, increment, push } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics.js";

        // بياناتك الخاصة
        const firebaseConfig = {
            apiKey: "AIzaSyDwFHDxbXLCohXaBwFlc5myFB9P_-QXCXE",
            authDomain: "mygamesstore-771a0.firebaseapp.com",
            databaseURL: "https://mygamesstore-771a0-default-rtdb.firebaseio.com",
            projectId: "mygamesstore-771a0",
            storageBucket: "mygamesstore-771a0.firebasestorage.app",
            messagingSenderId: "1098590085550",
            appId: "1:1098590085550:web:76eff1a069d7c60cd4283f",
            measurementId: "G-NWDZGVMZF6"
        };

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getDatabase(app);

        // --- عداد الأونلاين (المتواجدين الآن) ---
        const onlineRef = ref(db, 'status/online');
        const connectedRef = ref(db, '.info/connected');
        
        onValue(connectedRef, (snap) => {
            if (snap.val() === true) {
                const myCon = push(onlineRef);
                onDisconnect(myCon).remove();
                set(myCon, true);
            }
        });

        onValue(onlineRef, (snap) => {
            document.getElementById('online-count').innerText = snap.size || 1;
        });

        // --- عداد الزيارات الكلي (نظام الزيارة الواحدة في العمر) ---
        const totalViewsRef = ref(db, 'status/total_views');
        
        // التحقق من "الذاكرة المحلية الدائمة" (LocalStorage) بدلاً من الذاكرة المؤقتة
        // هذا يعني أن المتصفح سيتذكر أن هذا الشخص دخل سابقاً حتى لو أغلق الجهاز وعاد بعد شهر
        if (!localStorage.getItem('visited_permanently')) {
            // إذا لم يكن لديه "الختم" الدائم، قم بزيادة العدد
            set(totalViewsRef, increment(1));
            // ضع له الختم الدائم
            localStorage.setItem('visited_permanently', 'true');
        }

        onValue(totalViewsRef, (snap) => {
            document.getElementById('total-views').innerText = snap.val() || 0;
        });
    </script>
</body>
</html>

